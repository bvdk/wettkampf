# Migration `20200222102535-init`

This migration has been generated by marcel at 2/22/2020, 10:25:35 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."Event" (
    "contestType" TEXT NOT NULL DEFAULT 'SINGLE' ,
    "discipline" TEXT NOT NULL DEFAULT 'POWERLIFTING' ,
    "id" TEXT NOT NULL  ,
    "name" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."Athlete" (
    "BD1" REAL NOT NULL DEFAULT 0 ,
    "BD2" REAL NOT NULL DEFAULT 0 ,
    "BD3" REAL NOT NULL DEFAULT 0 ,
    "KB1" REAL NOT NULL DEFAULT 0 ,
    "KB2" REAL NOT NULL DEFAULT 0 ,
    "KB3" REAL NOT NULL DEFAULT 0 ,
    "KH1" REAL NOT NULL DEFAULT 0 ,
    "KH2" REAL NOT NULL DEFAULT 0 ,
    "KH3" REAL NOT NULL DEFAULT 0 ,
    "ageClass" TEXT NOT NULL  ,
    "athleteNumber" INTEGER NOT NULL DEFAULT 0 ,
    "birthday" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "bodyWeight" REAL NOT NULL DEFAULT 0 ,
    "club" TEXT NOT NULL DEFAULT '' ,
    "dots" REAL NOT NULL DEFAULT 0 ,
    "event" TEXT NOT NULL  ,
    "firstName" TEXT NOT NULL DEFAULT '' ,
    "gender" TEXT NOT NULL DEFAULT 'MALE' ,
    "id" TEXT NOT NULL  ,
    "importId" INTEGER NOT NULL DEFAULT 0 ,
    "lastName" TEXT NOT NULL DEFAULT '' ,
    "lateRegistration" BOOLEAN NOT NULL DEFAULT false ,
    "location" TEXT NOT NULL DEFAULT '' ,
    "los" INTEGER NOT NULL DEFAULT 0 ,
    "nextAttemptsSortKeys" TEXT NOT NULL DEFAULT '' ,
    "norm" BOOLEAN NOT NULL DEFAULT false ,
    "place" INTEGER NOT NULL DEFAULT 0 ,
    "points" REAL NOT NULL DEFAULT 0 ,
    "price" REAL NOT NULL DEFAULT 0 ,
    "raw" BOOLEAN NOT NULL DEFAULT false ,
    "resultClassId" TEXT NOT NULL DEFAULT '' ,
    "total" REAL NOT NULL DEFAULT 0 ,
    "weightClass" TEXT NOT NULL  ,
    "wilks" REAL NOT NULL DEFAULT 0 ,
    PRIMARY KEY ("id"),FOREIGN KEY ("event") REFERENCES "Event"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("weightClass") REFERENCES "WeightClass"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("ageClass") REFERENCES "AgeClass"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."Slot" (
    "event" TEXT NOT NULL  ,
    "id" TEXT NOT NULL  ,
    "name" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("event") REFERENCES "Event"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."AthleteGroup" (
    "event" TEXT NOT NULL  ,
    "id" TEXT NOT NULL  ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "slot" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("event") REFERENCES "Event"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("slot") REFERENCES "Slot"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."Attempt" (
    "athlete" TEXT NOT NULL  ,
    "date" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "discipline" TEXT NOT NULL DEFAULT 'POWERLIFTING' ,
    "done" BOOLEAN NOT NULL DEFAULT false ,
    "id" TEXT NOT NULL  ,
    "index" INTEGER NOT NULL DEFAULT 0 ,
    "raw" BOOLEAN NOT NULL DEFAULT false ,
    "resign" BOOLEAN NOT NULL DEFAULT false ,
    "valid" BOOLEAN NOT NULL DEFAULT false ,
    "weight" INTEGER NOT NULL DEFAULT 0 ,
    PRIMARY KEY ("id"),FOREIGN KEY ("athlete") REFERENCES "Athlete"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."WeightClass" (
    "gender" TEXT NOT NULL DEFAULT 'MALE' ,
    "id" TEXT NOT NULL  ,
    "max" INTEGER NOT NULL DEFAULT 0 ,
    "min" INTEGER NOT NULL DEFAULT 0 ,
    "name" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."AgeClass" (
    "id" TEXT NOT NULL  ,
    "name" TEXT NOT NULL DEFAULT '' ,
    "sortId" INTEGER NOT NULL DEFAULT 0 ,
    PRIMARY KEY ("id")
) 

CREATE TABLE "quaint"."Official" (
    "club" TEXT NOT NULL DEFAULT '' ,
    "event" TEXT NOT NULL  ,
    "firstName" TEXT NOT NULL DEFAULT '' ,
    "id" TEXT NOT NULL  ,
    "importId" INTEGER NOT NULL DEFAULT 0 ,
    "lastName" TEXT NOT NULL DEFAULT '' ,
    "license" TEXT NOT NULL DEFAULT '' ,
    "location" TEXT NOT NULL DEFAULT '' ,
    "officalNumber" INTEGER NOT NULL DEFAULT 0 ,
    "position" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("event") REFERENCES "Event"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."OfficialSlot" (
    "id" TEXT NOT NULL  ,
    "official" TEXT NOT NULL  ,
    "position" TEXT NOT NULL DEFAULT 'SEITENKAMPFRICHTER' ,
    "slot" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("slot") REFERENCES "Slot"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("official") REFERENCES "Official"("id") ON DELETE RESTRICT ON UPDATE CASCADE
) 

CREATE TABLE "quaint"."User" (
    "id" TEXT NOT NULL  ,
    "passwordHash" TEXT NOT NULL DEFAULT '' ,
    "role" TEXT NOT NULL DEFAULT 'ADMIN' ,
    "salt" TEXT NOT NULL DEFAULT '' ,
    "username" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
) 
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200222102535-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,155 @@
+generator ts {
+  provider = "prisma-client-js"
+  output   = "./src/client"
+}
+
+datasource db {
+  provider = "sqlite"
+  url      = "sqlite:./data.db"
+}
+
+enum Discipline {
+    POWERLIFTING
+    SQUAT
+    BENCHPRESS
+    DEADLIFT
+}
+
+enum ContestType {
+    SINGLE
+    TEAM
+}
+
+enum Gender {
+    MALE
+    FEMALE
+}
+
+enum Role {
+    ADMIN
+    GUEST
+}
+
+enum Position {
+    SEITENKAMPFRICHTER
+}
+
+model Event {
+    id                      String      @id
+    name                    String
+
+    discipline              Discipline
+    contestType             ContestType
+}
+
+model Athlete {
+    id                      String      @id
+    raw                     Boolean
+    athleteNumber           Int
+    firstName               String
+    lastName                String
+    gender                  Gender
+    club                    String
+    birthday                DateTime
+    total                   Float
+    norm                    Boolean
+    lateRegistration        Boolean
+    price                   Float
+    bodyWeight              Float
+    wilks                   Float
+    dots                    Float
+    los                     Int
+    KB1                     Float
+    KB2                     Float
+    KB3                     Float
+    BD1                     Float
+    BD2                     Float
+    BD3                     Float
+    KH1                     Float
+    KH2                     Float
+    KH3                     Float
+    points                  Float
+    place                   Int
+    location                String
+    nextAttemptsSortKeys    String
+    importId                Int
+
+    event                   Event
+    weightClass             WeightClass
+    ageClass                AgeClass
+
+    resultClassId           String
+}
+
+model Slot {
+    id                      String      @id
+    name                    String
+
+    event                   Event
+}
+
+model AthleteGroup {
+    id                      String      @id
+    name                    String
+
+    event                   Event
+    slot                    Slot
+}
+
+model Attempt {
+    id                      String      @id
+    discipline              Discipline
+    date                    DateTime
+    index                   Int
+    weight                  Int
+    raw                     Boolean
+    valid                   Boolean
+    done                    Boolean
+    resign                  Boolean
+
+    athlete                 Athlete
+}
+
+model WeightClass {
+    id                      String      @id
+    name                    String
+    gender                  Gender
+    min                     Int
+    max                     Int
+}
+
+model AgeClass {
+    id                      String      @id
+    name                    String
+    sortId                  Int
+}
+
+model Official {
+    id                      String      @id
+    officalNumber           Int
+    lastName                String
+    firstName               String
+    club                    String
+    license                 String
+    position                String
+    location                String
+    importId                Int
+
+    event                   Event
+}
+
+model OfficialSlot {
+    id                      String      @id
+    position                Position
+
+    official                Official
+    slot                    Slot
+}
+
+model User {
+    id                      String      @id
+    role                    Role
+    username                String
+    passwordHash            String
+    salt                    String
+}
```


